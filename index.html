<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Case Mockup Generator</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }

        h1 {
            color: #222;
            margin-bottom: 10px;
            font-weight: 300;
            font-size: 2.2em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 20px;a
            font-size: 1.1em;
            font-weight: 300;
        }

        .case-material-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 30px;
        }

        .case-material-link {
            color: #4CAF50;
            text-decoration: none;
            font-weight: 400;
            font-size: 0.95em;
            padding: 10px 18px;
            border: 1px solid #4CAF50;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .case-material-link:hover, .case-material-link.active {
            background-color: #4CAF50;
            color: white;
        }

        #controls {
            margin: 20px auto;
            padding: 15px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            max-width: 800px;
        }

        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 18px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 400;
            transition: background-color 0.2s ease;
            letter-spacing: 0.5px;
        }

        button:hover {
            background: #3d8b40;
        }

        #main-mockup-container {
            position: relative;
            display: inline-block;
            margin: 20px auto;
            width: 800px;
            height: 800px;
            overflow: hidden;
            background-color: white;
        }

        .phone-case-bg, .phone-case-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: auto;
        }

        .phone-case-bg {
            z-index: 1;
        }

        .design-area {
            position: absolute;
            z-index: 2;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .user-design {
            position: absolute;
            max-width: 100%;
            max-height: 100%;
            top: 48.5%;
            left: 48.5%;
            transform: translate(-50%, -50%);
            object-fit: contain;
            display: none; /* Hidden by default */
        }

        .phone-case-overlay {
            z-index: 3;
            pointer-events: none;
        }

        .carousel-wrapper {
            position: relative;
            max-width: 1600px;
            margin: 20px auto;
        }

        .carousel-container {
            width: calc(100% - 80px);
            margin: 0 auto;
            overflow-x: hidden;
            white-space: nowrap;
            scroll-behavior: smooth;
        }

        .carousel-inner {
            display: inline-block;
            white-space: nowrap;
            transition: transform 0.5s ease-out;
        }

        .carousel-item {
            display: inline-block;
            width: 360px;
            margin: 0 10px;
            vertical-align: top;
            white-space: normal;
            position: relative;
        }

        .secondary-mockup {
            position: relative;
            width: 360px;
            height: 360px;
            overflow: hidden;
            background-color: white;
            margin-bottom: 10px;
        }

        .carousel-checkbox {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 4;
            transform: scale(1.5);
        }

        .mockup-label {
            font-size: 0.9em;
            margin-top: 5px;
            font-weight: 300;
        }

        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background-color: rgba(0,0,0,0.5);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            z-index: 5;
            border: none;
            transition: background-color 0.2s ease;
        }

        .carousel-arrow:hover {
            background-color: rgba(0,0,0,0.7);
        }

        .carousel-arrow.left {
            left: 0;
        }

        .carousel-arrow.right {
            right: 0;
        }

        .hidden {
            display: none;
        }

        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.2em;
            flex-direction: column;
            font-weight: 300;
        }

        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #4CAF50;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="loading">
        <div class="spinner"></div>
        <div>Generating your mockups...</div>
    </div>
    
    <h1>Phone Case Mockup Generator</h1>
    <div class="subtitle">Select Phone Case Material and Make</div>
    
    <div class="case-material-container">
        <a href="#" class="case-material-link active" data-case="samsung-tpu">Clear TPU case for Samsung</a>
        <a href="#" class="case-material-link" data-case="iphone-tpu">Clear TPU case for iPhone</a>
        <a href="#" class="case-material-link" data-case="iphone-hybrid">Clear Hybrid case for iPhone</a>
        <a href="#" class="case-material-link" data-case="pixel-tpu">Clear TPU case for Google Pixel</a>
        <a href="#" class="case-material-link" data-case="iphone-fullprint">Full print case for iPhone</a>
    </div>
    
    <div id="controls">
        <input type="file" id="image-upload" accept="image/*">
        <button id="download-btn">Download Main Mockup</button>
        <button id="download-zip-btn">Download Selected Views as ZIP</button>
    </div>
    
    <!-- Samsung TPU Mockups -->
    <div id="samsung-tpu" class="case-mockups">
        <!-- Main Mockup -->
        <div id="main-mockup-container">
            <img class="phone-case-bg" src="mockups/samsung-tpu-back-main.png">
            <div class="design-area">
                <img class="user-design" src="" alt="">
            </div>
            <img class="phone-case-overlay" src="mockups/samsung-tpu-overlay-main.png">
        </div>

        <!-- Secondary Mockups Carousel -->
        <div class="carousel-wrapper">
            <button class="carousel-arrow left">&#10094;</button>
            <div class="carousel-container">
                <div class="carousel-inner">
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="1">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view1.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view1-overlay.png">
                        </div>
                        <div class="mockup-label">View 1</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="2">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view2.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view2-overlay.png">
                        </div>
                        <div class="mockup-label">View 2</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="3">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view3.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view3-overlay.png">
                        </div>
                        <div class="mockup-label">View 3</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="4">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view4.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view4-overlay.png">
                        </div>
                        <div class="mockup-label">View 4</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="5">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view5.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view5-overlay.png">
                        </div>
                        <div class="mockup-label">View 5</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="6">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view6.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view6-overlay.png">
                        </div>
                        <div class="mockup-label">View 6</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="7">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view7.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view7-overlay.png">
                        </div>
                        <div class="mockup-label">View 7</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="8">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view8.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view8-overlay.png">
                        </div>
                        <div class="mockup-label">View 8</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="9">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view9.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view9-overlay.png">
                        </div>
                        <div class="mockup-label">View 9</div>
                    </div>
                    <div class="carousel-item">
                        <div class="secondary-mockup">
                            <input type="checkbox" class="carousel-checkbox" data-view="10">
                            <img class="phone-case-bg" src="mockups/samsung-tpu-view10.png">
                            <div class="design-area">
                                <img class="user-design" src="" alt="">
                            </div>
                            <img class="phone-case-overlay" src="mockups/samsung-tpu-view10-overlay.png">
                        </div>
                        <div class="mockup-label">View 10</div>
                    </div>
                </div>
            </div>
            <button class="carousel-arrow right">&#10095;</button>
        </div>
    </div>

<!-- iPhone TPU Mockups -->
<div id="iphone-tpu" class="case-mockups hidden">
    <!-- Main Mockup -->
    <div id="main-mockup-container">
        <img class="phone-case-bg" src="mockups/iphone-tpu-back-main.png">
        <div class="design-area">
            <img class="user-design" src="" alt="">
        </div>
        <img class="phone-case-overlay" src="mockups/iphone-tpu-overlay-main.png">
    </div>

    <!-- Secondary Mockups Carousel -->
    <div class="carousel-wrapper">
        <button class="carousel-arrow left">&#10094;</button>
        <div class="carousel-container">
            <div class="carousel-inner">
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="1">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view1.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view1-overlay.png">
                    </div>
                    <div class="mockup-label">View 1</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="2">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view2.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view2-overlay.png">
                    </div>
                    <div class="mockup-label">View 2</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="3">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view3.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view3-overlay.png">
                    </div>
                    <div class="mockup-label">View 3</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="4">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view4.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view4-overlay.png">
                    </div>
                    <div class="mockup-label">View 4</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="5">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view5.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view5-overlay.png">
                    </div>
                    <div class="mockup-label">View 5</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="6">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view6.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view6-overlay.png">
                    </div>
                    <div class="mockup-label">View 6</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="7">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view7.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view7-overlay.png">
                    </div>
                    <div class="mockup-label">View 7</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="8">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view8.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view8-overlay.png">
                    </div>
                    <div class="mockup-label">View 8</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="9">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view9.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view9-overlay.png">
                    </div>
                    <div class="mockup-label">View 9</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="10">
                        <img class="phone-case-bg" src="mockups/iphone-tpu-view10.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-tpu-view10-overlay.png">
                    </div>
                    <div class="mockup-label">View 10</div>
                </div>
            </div>
        </div>
        <button class="carousel-arrow right">&#10095;</button>
    </div>
</div>

<!-- iPhone Hybrid Mockups -->
<div id="iphone-hybrid" class="case-mockups hidden">
    <!-- Main Mockup -->
    <div id="main-mockup-container">
        <img class="phone-case-bg" src="mockups/iphone-hybrid-back-main.png">
        <div class="design-area">
            <img class="user-design" src="" alt="">
        </div>
        <img class="phone-case-overlay" src="mockups/iphone-hybrid-overlay-main.png">
    </div>

    <!-- Secondary Mockups Carousel -->
    <div class="carousel-wrapper">
        <button class="carousel-arrow left">&#10094;</button>
        <div class="carousel-container">
            <div class="carousel-inner">
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="1">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view1.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view1-overlay.png">
                    </div>
                    <div class="mockup-label">View 1</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="2">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view2.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view2-overlay.png">
                    </div>
                    <div class="mockup-label">View 2</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="3">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view3.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view3-overlay.png">
                    </div>
                    <div class="mockup-label">View 3</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="4">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view4.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view4-overlay.png">
                    </div>
                    <div class="mockup-label">View 4</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="5">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view5.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view5-overlay.png">
                    </div>
                    <div class="mockup-label">View 5</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="6">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view6.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view6-overlay.png">
                    </div>
                    <div class="mockup-label">View 6</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="7">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view7.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view7-overlay.png">
                    </div>
                    <div class="mockup-label">View 7</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="8">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view8.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view8-overlay.png">
                    </div>
                    <div class="mockup-label">View 8</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="9">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view9.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view9-overlay.png">
                    </div>
                    <div class="mockup-label">View 9</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="10">
                        <img class="phone-case-bg" src="mockups/iphone-hybrid-view10.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-hybrid-view10-overlay.png">
                    </div>
                    <div class="mockup-label">View 10</div>
                </div>
            </div>
        </div>
        <button class="carousel-arrow right">&#10095;</button>
    </div>
</div>

<!-- Pixel TPU Mockups -->
<div id="pixel-tpu" class="case-mockups hidden">
    <!-- Main Mockup -->
    <div id="main-mockup-container">
        <img class="phone-case-bg" src="mockups/pixel-tpu-back-main.png">
        <div class="design-area">
            <img class="user-design" src="" alt="">
        </div>
        <img class="phone-case-overlay" src="mockups/pixel-tpu-overlay-main.png">
    </div>

    <!-- Secondary Mockups Carousel -->
    <div class="carousel-wrapper">
        <button class="carousel-arrow left">&#10094;</button>
        <div class="carousel-container">
            <div class="carousel-inner">
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="1">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view1.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view1-overlay.png">
                    </div>
                    <div class="mockup-label">View 1</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="2">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view2.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view2-overlay.png">
                    </div>
                    <div class="mockup-label">View 2</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="3">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view3.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view3-overlay.png">
                    </div>
                    <div class="mockup-label">View 3</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="4">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view4.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view4-overlay.png">
                    </div>
                    <div class="mockup-label">View 4</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="5">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view5.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view5-overlay.png">
                    </div>
                    <div class="mockup-label">View 5</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="6">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view6.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view6-overlay.png">
                    </div>
                    <div class="mockup-label">View 6</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="7">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view7.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view7-overlay.png">
                    </div>
                    <div class="mockup-label">View 7</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="8">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view8.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view8-overlay.png">
                    </div>
                    <div class="mockup-label">View 8</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="9">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view9.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view9-overlay.png">
                    </div>
                    <div class="mockup-label">View 9</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="10">
                        <img class="phone-case-bg" src="mockups/pixel-tpu-view10.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/pixel-tpu-view10-overlay.png">
                    </div>
                    <div class="mockup-label">View 10</div>
                </div>
            </div>
        </div>
        <button class="carousel-arrow right">&#10095;</button>
    </div>
</div>

<!-- iPhone Fullprint Mockups -->
<div id="iphone-fullprint" class="case-mockups hidden">
    <!-- Main Mockup -->
    <div id="main-mockup-container">
        <img class="phone-case-bg" src="mockups/iphone-fullprint-back-main.png">
        <div class="design-area">
            <img class="user-design" src="" alt="">
        </div>
        <img class="phone-case-overlay" src="mockups/iphone-fullprint-overlay-main.png">
    </div>

    <!-- Secondary Mockups Carousel -->
    <div class="carousel-wrapper">
        <button class="carousel-arrow left">&#10094;</button>
        <div class="carousel-container">
            <div class="carousel-inner">
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="1">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view1.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view1-overlay.png">
                    </div>
                    <div class="mockup-label">View 1</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="2">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view2.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view2-overlay.png">
                    </div>
                    <div class="mockup-label">View 2</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="3">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view3.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view3-overlay.png">
                    </div>
                    <div class="mockup-label">View 3</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="4">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view4.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view4-overlay.png">
                    </div>
                    <div class="mockup-label">View 4</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="5">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view5.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view5-overlay.png">
                    </div>
                    <div class="mockup-label">View 5</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="6">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view6.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view6-overlay.png">
                    </div>
                    <div class="mockup-label">View 6</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="7">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view7.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view7-overlay.png">
                    </div>
                    <div class="mockup-label">View 7</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="8">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view8.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view8-overlay.png">
                    </div>
                    <div class="mockup-label">View 8</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="9">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view9.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view9-overlay.png">
                    </div>
                    <div class="mockup-label">View 9</div>
                </div>
                <div class="carousel-item">
                    <div class="secondary-mockup">
                        <input type="checkbox" class="carousel-checkbox" data-view="10">
                        <img class="phone-case-bg" src="mockups/iphone-fullprint-view10.png">
                        <div class="design-area">
                            <img class="user-design" src="" alt="">
                        </div>
                        <img class="phone-case-overlay" src="mockups/iphone-fullprint-view10-overlay.png">
                    </div>
                    <div class="mockup-label">View 10</div>
                </div>
            </div>
        </div>
        <button class="carousel-arrow right">&#10095;</button>
    </div>
</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script>
// DOM Elements
const imageUpload = document.getElementById('image-upload');
const downloadBtn = document.getElementById('download-btn');
const downloadZipBtn = document.getElementById('download-zip-btn');
const caseLinks = document.querySelectorAll('.case-material-link');
const loadingElement = document.querySelector('.loading');

// State variables
let uploadedImage = new Image();
let currentCarousel = document.querySelector('#samsung-tpu .carousel-inner');
let currentScroll = 0;
const itemWidth = 320;
const mockupCache = new Map();
let currentCaseType = 'samsung-tpu';

// View configurations with position, size, and rotation
const viewConfigurations = {
    'samsung-tpu': {
        'main': { top: '48.5%', left: '48.5%', width: '90%', height: '90%', rotation: 0 },
        '1': { top: '45%', left: '50%', width: '85%', height: '85%', rotation: 0 },
        '2': { top: '50%', left: '50%', width: '80%', height: '80%', rotation: 10 },
        '3': { top: '52%', left: '48%', width: '75%', height: '75%', rotation: -5 },
        '4': { top: '48%', left: '52%', width: '70%', height: '70%', rotation: 15 },
        '5': { top: '50%', left: '50%', width: '65%', height: '65%', rotation: -10 },
        '6': { top: '47%', left: '49%', width: '60%', height: '60%', rotation: 5 },
        '7': { top: '51%', left: '51%', width: '55%', height: '55%', rotation: -15 },
        '8': { top: '49%', left: '50%', width: '50%', height: '50%', rotation: 20 },
        '9': { top: '48%', left: '49%', width: '45%', height: '45%', rotation: -20 },
        '10': { top: '50%', left: '51%', width: '40%', height: '40%', rotation: 25 }
    },
    'iphone-tpu': {
        'main': { top: '48%', left: '48%', width: '92%', height: '92%', rotation: 0 },
        '1': { top: '46%', left: '49%', width: '87%', height: '87%', rotation: 0 },
        '2': { top: '49%', left: '51%', width: '82%', height: '82%', rotation: 12 },
        '3': { top: '51%', left: '47%', width: '77%', height: '77%', rotation: -7 },
        '4': { top: '47%', left: '53%', width: '72%', height: '72%', rotation: 17 },
        '5': { top: '49%', left: '49%', width: '67%', height: '67%', rotation: -12 },
        '6': { top: '48%', left: '48%', width: '62%', height: '62%', rotation: 7 },
        '7': { top: '52%', left: '52%', width: '57%', height: '57%', rotation: -17 },
        '8': { top: '48%', left: '49%', width: '52%', height: '52%', rotation: 22 },
        '9': { top: '47%', left: '48%', width: '47%', height: '47%', rotation: -22 },
        '10': { top: '51%', left: '52%', width: '42%', height: '42%', rotation: 27 }
    },
    'iphone-hybrid': {
        'main': { top: '47.5%', left: '47.5%', width: '91%', height: '91%', rotation: 0 },
        '1': { top: '45%', left: '48%', width: '86%', height: '86%', rotation: 0 },
        '2': { top: '48%', left: '52%', width: '81%', height: '81%', rotation: 10 },
        '3': { top: '50%', left: '46%', width: '76%', height: '76%', rotation: -5 },
        '4': { top: '46%', left: '54%', width: '71%', height: '71%', rotation: 15 },
        '5': { top: '48%', left: '48%', width: '66%', height: '66%', rotation: -10 },
        '6': { top: '47%', left: '47%', width: '61%', height: '61%', rotation: 5 },
        '7': { top: '53%', left: '53%', width: '56%', height: '56%', rotation: -15 },
        '8': { top: '47%', left: '48%', width: '51%', height: '51%', rotation: 20 },
        '9': { top: '46%', left: '47%', width: '46%', height: '46%', rotation: -20 },
        '10': { top: '52%', left: '53%', width: '41%', height: '41%', rotation: 25 }
    },
    'pixel-tpu': {
        'main': { top: '49%', left: '49%', width: '88%', height: '88%', rotation: 0 },
        '1': { top: '47%', left: '50%', width: '83%', height: '83%', rotation: 0 },
        '2': { top: '51%', left: '52%', width: '78%', height: '78%', rotation: 8 },
        '3': { top: '53%', left: '47%', width: '73%', height: '73%', rotation: -3 },
        '4': { top: '49%', left: '53%', width: '68%', height: '68%', rotation: 13 },
        '5': { top: '51%', left: '51%', width: '63%', height: '63%', rotation: -8 },
        '6': { top: '50%', left: '50%', width: '58%', height: '58%', rotation: 3 },
        '7': { top: '54%', left: '54%', width: '53%', height: '53%', rotation: -13 },
        '8': { top: '50%', left: '51%', width: '48%', height: '48%', rotation: 18 },
        '9': { top: '49%', left: '50%', width: '43%', height: '43%', rotation: -18 },
        '10': { top: '53%', left: '54%', width: '38%', height: '38%', rotation: 23 }
    },
    'iphone-fullprint': {
        'main': { top: '48%', left: '48%', width: '93%', height: '93%', rotation: 0 },
        '1': { top: '46%', left: '49%', width: '88%', height: '88%', rotation: 0 },
        '2': { top: '50%', left: '51%', width: '83%', height: '83%', rotation: 9 },
        '3': { top: '52%', left: '47%', width: '78%', height: '78%', rotation: -4 },
        '4': { top: '48%', left: '53%', width: '73%', height: '73%', rotation: 14 },
        '5': { top: '50%', left: '50%', width: '68%', height: '68%', rotation: -9 },
        '6': { top: '49%', left: '49%', width: '63%', height: '63%', rotation: 4 },
        '7': { top: '53%', left: '53%', width: '58%', height: '58%', rotation: -14 },
        '8': { top: '49%', left: '50%', width: '53%', height: '53%', rotation: 19 },
        '9': { top: '48%', left: '49%', width: '48%', height: '48%', rotation: -19 },
        '10': { top: '52%', left: '53%', width: '43%', height: '43%', rotation: 24 }
    }
};

// Initialize carousels
document.querySelectorAll('.carousel-inner').forEach(carousel => {
    updateCarousel(carousel);
});

// Image upload handler
imageUpload.addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    showLoading("Loading your design...");
    
    const reader = new FileReader();
    reader.onload = function(e) {
        // Hide all design images first
        document.querySelectorAll('.user-design').forEach(design => {
            design.style.display = 'none';
        });
        
        // Update only visible designs
        const activeCase = document.querySelector('.case-mockups:not(.hidden)');
        if (activeCase) {
            activeCase.querySelectorAll('.user-design').forEach(design => {
                design.src = e.target.result;
                design.onload = () => {
                    design.style.display = 'block';
                    // Apply configuration based on view
                    const container = design.closest('.secondary-mockup') || 
                                     design.closest('#main-mockup-container');
                    const view = container.querySelector('.carousel-checkbox')?.dataset.view || 'main';
                    const config = viewConfigurations[currentCaseType][view];
                    applyDesignConfig(design, config);
                    hideLoading();
                };
                design.onerror = () => {
                    design.style.display = 'none';
                    hideLoading();
                    alert("Error loading your design. Please try another image.");
                };
            });
        }
        
        uploadedImage.src = e.target.result;
        mockupCache.clear();
    };
    reader.readAsDataURL(file);
});

// Apply design configuration to an element
function applyDesignConfig(design, config) {
    if (!design || !config) return;
    
    design.style.top = config.top;
    design.style.left = config.left;
    design.style.width = config.width;
    design.style.height = config.height;
    design.style.transform = `translate(-50%, -50%) rotate(${config.rotation}deg)`;
}

// Case material selection
caseLinks.forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Update active link
        caseLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
        
        // Show selected mockups
        currentCaseType = this.dataset.case;
        document.querySelectorAll('.case-mockups').forEach(mockup => {
            mockup.classList.add('hidden');
        });
        document.getElementById(currentCaseType).classList.remove('hidden');
        
        // Reset carousel scroll for the new view
        currentScroll = 0;
        currentCarousel = document.querySelector(`#${currentCaseType} .carousel-inner`);
        updateCarousel(currentCarousel);
        
        // Update designs with new configurations
        updateAllDesigns();
    });
});

// Update all designs with current configurations
function updateAllDesigns() {
    const activeCase = document.querySelector(`#${currentCaseType}`);
    if (!activeCase) return;

    // Update main view
    const mainDesign = activeCase.querySelector('#main-mockup-container .user-design');
    if (mainDesign && mainDesign.src) {
        applyDesignConfig(mainDesign, viewConfigurations[currentCaseType]['main']);
    }

    // Update all secondary views
    activeCase.querySelectorAll('.secondary-mockup .user-design').forEach(design => {
        if (design.src) {
            const view = design.closest('.secondary-mockup').querySelector('.carousel-checkbox').dataset.view;
            applyDesignConfig(design, viewConfigurations[currentCaseType][view]);
        }
    });
}

// Carousel navigation
function updateCarousel(carouselInner) {
    carouselInner.style.transform = `translateX(-${currentScroll}px)`;
    const arrows = carouselInner.closest('.carousel-wrapper').querySelectorAll('.carousel-arrow');
    arrows[0].style.display = currentScroll <= 0 ? 'none' : 'flex';
    arrows[1].style.display = currentScroll >= (carouselInner.scrollWidth - carouselInner.parentElement.offsetWidth) ? 'none' : 'flex';
}

document.addEventListener('click', function(e) {
    if (e.target.classList.contains('carousel-arrow')) {
        const wrapper = e.target.closest('.carousel-wrapper');
        const carouselInner = wrapper.querySelector('.carousel-inner');
        const scrollAmount = itemWidth;
        
        if (e.target.classList.contains('left')) {
            currentScroll = Math.max(0, currentScroll - scrollAmount);
        } else {
            currentScroll = Math.min(
                carouselInner.scrollWidth - wrapper.querySelector('.carousel-container').offsetWidth,
                currentScroll + scrollAmount
            );
        }
        updateCarousel(carouselInner);
    }
});

// Optimized image loader with error handling
async function loadImage(src) {
    return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = () => resolve(img);
        img.onerror = () => reject(new Error(`Failed to load image: ${src}`));
        img.src = src;
    });
}

// Preload mockup assets for better performance
async function preloadMockupAssets(activeCase) {
    const assets = new Set([
        activeCase.querySelector('.phone-case-bg').src,
        activeCase.querySelector('.phone-case-overlay').src
    ]);
    
    // Add all visible secondary mockups
    activeCase.querySelectorAll('.phone-case-bg, .phone-case-overlay').forEach(el => {
        assets.add(el.src);
    });
    
    await Promise.all(Array.from(assets).map(src => 
        loadImage(src).catch(e => console.warn(e.message))
    );
}

// Generate mockup image with caching (now includes rotation)
async function generateMockupImage(container) {
    const cacheKey = `${container.id}-${uploadedImage.src}`;
    if (mockupCache.has(cacheKey)) {
        return mockupCache.get(cacheKey);
    }

    showLoading("Generating mockup...");
    
    try {
        const canvas = document.createElement('canvas');
        canvas.width = 2000;
        canvas.height = 2000;
        const ctx = canvas.getContext('2d');

        const bg = await loadImage(container.querySelector('.phone-case-bg').src);
        const overlay = await loadImage(container.querySelector('.phone-case-overlay').src);

        // Draw background
        ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);
        
        // Draw design if uploaded
        if (uploadedImage.src) {
            try {
                const design = await loadImage(uploadedImage.src);
                const view = container.querySelector('.carousel-checkbox')?.dataset.view || 'main';
                const config = viewConfigurations[currentCaseType][view];
                
                // Save the current context
                ctx.save();
                
                // Move to the center of the design position
                const x = (parseInt(config.left) / 100) * canvas.width;
                const y = (parseInt(config.top) / 100) * canvas.height;
                ctx.translate(x, y);
                
                // Apply rotation
                ctx.rotate(config.rotation * Math.PI / 180);
                
                // Calculate dimensions
                const width = (parseInt(config.width) / 100) * canvas.width;
                const height = (parseInt(config.height) / 100) * canvas.height;
                
                // Draw the image centered at the translation point
                ctx.drawImage(design, -width/2, -height/2, width, height);
                
                // Restore the context
                ctx.restore();
            } catch (e) {
                console.warn("Design image not loaded:", e.message);
            }
        }
        
        // Draw overlay
        ctx.drawImage(overlay, 0, 0, canvas.width, canvas.height);
        
        mockupCache.set(cacheKey, canvas);
        return canvas;
    } finally {
        hideLoading();
    }
}

// Download main mockup
downloadBtn.addEventListener('click', async function() {
    if (!uploadedImage.src) {
        alert('Please upload an image first');
        return;
    }

    showLoading("Generating main mockup...");
    
    try {
        const activeCase = document.querySelector('.case-mockups:not(.hidden)');
        const mainContainer = activeCase.querySelector('#main-mockup-container');
        const canvas = await generateMockupImage(mainContainer);
        downloadBlob(await canvasToBlob(canvas), 'main-mockup.png');
    } catch (error) {
        console.error("Error generating mockup:", error);
        alert("Error generating mockup. Please try again.");
    } finally {
        hideLoading();
    }
});

// Download ZIP with selected views
downloadZipBtn.addEventListener('click', async function() {
    if (!uploadedImage.src) {
        alert('Please upload an image first');
        return;
    }

    showLoading("Preparing your download...");
    
    try {
        const activeCase = document.querySelector('.case-mockups:not(.hidden)');
        await preloadMockupAssets(activeCase);
        
        const zip = new JSZip();
        const imgFolder = zip.folder("mockups");
        
        // Add main mockup
        showLoading("Generating main mockup...");
        const mainContainer = activeCase.querySelector('#main-mockup-container');
        const mainCanvas = await generateMockupImage(mainContainer);
        imgFolder.file("main-mockup.png", await canvasToBlob(mainCanvas));
        
        // Process selected views
        const checkboxes = Array.from(activeCase.querySelectorAll('.carousel-checkbox:checked'));
        const totalViews = checkboxes.length;
        
        for (let i = 0; i < checkboxes.length; i++) {
            const checkbox = checkboxes[i];
            showLoading(`Generating view ${i+1} of ${totalViews}...`);
            
            const viewNumber = checkbox.dataset.view;
            const container = checkbox.closest('.secondary-mockup');
            const canvas = await generateMockupImage(container);
            imgFolder.file(`view-${viewNumber}.png`, await canvasToBlob(canvas));
        }
        
        // Generate ZIP
        showLoading("Compressing files...");
        const content = await zip.generateAsync({
            type: "blob",
            compression: "DEFLATE",
            compressionOptions: { level: 6 }
        }, updateProgress);
        
        downloadBlob(content, 'mockups.zip');
    } catch (error) {
        console.error("Error generating mockups:", error);
        alert("Error generating mockups. Please try again.");
    } finally {
        hideLoading();
    }
});

// Helper functions
function canvasToBlob(canvas) {
    return new Promise(resolve => {
        canvas.toBlob(blob => {
            resolve(blob);
        }, 'image/png', 0.95);
    });
}

function downloadBlob(blob, filename) {
    const link = document.createElement('a');
    link.download = filename;
    link.href = URL.createObjectURL(blob);
    document.body.appendChild(link);
    link.click();
    setTimeout(() => {
        URL.revokeObjectURL(link.href);
        link.remove();
    }, 100);
}

function showLoading(message = "Processing...") {
    loadingElement.innerHTML = `
        <div class="spinner"></div>
        <div>${message}</div>
    `;
    loadingElement.style.display = 'flex';
}

function hideLoading() {
    loadingElement.style.display = 'none';
}

function updateProgress(metadata) {
    if (metadata.currentFile) {
        const progress = Math.round(metadata.percent);
        loadingElement.innerHTML = `
            <div class="spinner"></div>
            <div>Compressing ${metadata.currentFile}... ${progress}%</div>
        `;
    }
}
    </script>
</body>
</html>
